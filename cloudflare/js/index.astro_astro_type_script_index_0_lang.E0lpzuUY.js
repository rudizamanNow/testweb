class l{summary;duration;forcedSwitchTabs;forcedTabLoop;isDestroyed=!1;timeouts=[];index;tabTitle;parentTitle;tabTitles;hash;backgroundOffset;tabTitleText;tabContent;parentContainer;constructor(t,e){this.hash=e,this.index=0,this.parentContainer=t,this.parentTitle=this.parentContainer.querySelector("[data-qa=FragmentTitle]"),this.tabTitle=this.parentContainer.querySelector(`[data-qa=tab-title-${this.hash}-0]`),this.duration=Number(this.parentContainer.getAttribute("data-switch-tab-interval")),this.forcedSwitchTabs=this.parentContainer.getAttribute("data-forced-switch-tab")==="true",this.forcedTabLoop=this.parentContainer.getAttribute("data-forced-tab-loop")==="true",this.tabTitles=this.parentContainer.querySelectorAll("[data-qa^=tab-title-]"),this.backgroundOffset=0,this.tabTitles.forEach(s=>{const a=Number(s.getAttribute("data-qa").split("-")[3]);s.addEventListener("click",r=>this.onClick(r,a))}),this.selectTab(0),this.forcedSwitchTabs&&this.createObserver()}selectTab(t){this.tabTitle=this.parentContainer.querySelector(`[data-qa=tab-title-${this.hash}-${t}]`);const e=this.parentContainer?.querySelector(`[data-qa=tab-entry-${this.hash}-${t}]`),s=this.parentContainer?.querySelector(`[data-qa=tab-title-${this.hash}-${t}]`);t!==this.index&&s?.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"}),this.index=t,e?.classList.remove("hidden"),e?.setAttribute("aria-hidden","false");const a=this.tabTitle.parentElement?.parentElement?.parentElement?.offsetTop,r=this.tabTitle.parentElement?.parentElement?.parentElement?.parentElement?.clientHeight;this.backgroundOffset=r+32-(a+78);const i=this.parentContainer?.parentElement?.parentElement;i&&(i.style["background-size"]=`100% ${this.backgroundOffset}px`),s?.classList.add("active"),s?.querySelector("[data-qa=Heading]")?.classList.add("tabTextSelected");const n=this.parentContainer?.querySelector(`[data-qa=tab-progress-bar-${this.hash}-${t}]`);n?.classList.add("grayProgressBar","progressBarGradient"),this.forcedSwitchTabs?n?.classList.add("animate-progress-bar"):n?.classList.remove("animate-progress-bar")}unselectOtherTabs(t,e=!1){[...this.parentContainer.querySelectorAll(`[data-qa^=tab-entry-${this.hash}]`)||[]].filter(a=>a?.getAttribute("data-qa")!==`tab-title-${this.hash}-${t}`).forEach(a=>{e&&(a?.setAttribute("aria-hidden","true"),a?.classList.add("hidden"))}),(this.parentContainer?.querySelectorAll(`[data-qa=TabTitleEntry-${this.hash}]`)).forEach(a=>{const r=a.firstElementChild,i=a.querySelector(`[data-qa^=tab-progress-bar-${this.hash}]`);r.getAttribute("data-qa")!==`tab-title-${this.hash}-${t}`&&(r.querySelector("[data-qa=Heading]")?.classList.remove("tabTextSelected"),r?.classList.remove("active")),i.getAttribute("data-qa")!==`tab-progress-bar-${this.hash}-${t}`&&(i?.classList.remove("grayProgressBar"),i?.classList.remove("animate-progress-bar"))})}createObserver(){new IntersectionObserver(e=>{e[0].isIntersecting?this.animateProgressBar():(this.unselectOtherTabs(this.index),this.removeGradient(),this.stopProgressBar())}).observe(this.parentTitle)}safeSetTimeout(t,e){if(!this.isDestroyed){const s=setTimeout(t,e);this.timeouts.push(s)}}animateProgressBar(){const t=this.duration*1e3,e=this.parentContainer.querySelectorAll(`[data-qa^=tab-progress-bar-${this.hash}]`);e.forEach((s,a)=>{this.safeSetTimeout(()=>{this.unselectOtherTabs(a,!0),this.selectTab(a),s.classList.add("animate-progress-bar"),this.forcedTabLoop&&a===e.length-1&&this.safeSetTimeout(()=>{this.animateProgressBar()},t)},t*a)})}addGradient(){this.parentContainer.querySelector(`[data-qa=tab-progress-container-bar-${this.hash}-${this.index}]`).classList.add("progressBarGradient")}removeGradient(){this.parentContainer.querySelector(`[data-qa=tab-progress-container-bar-${this.hash}-${this.index}]`).classList.remove("progressBarGradient")}onClick(t,e){this.unselectOtherTabs(e,!0),this.index=e,this.tabTitle=this.parentContainer.querySelector(`[data-qa=tab-title-${this.hash}-${e}]`),this.stopProgressBar(),this.selectTab(this.index),this.addGradient(),this.tabContent?.setAttribute("aria-hidden","false"),this.tabContent?.classList.remove("hidden"),this.tabTitleText?.classList.add("tabTextSelected"),this.tabTitle?.classList.add("active")}stopProgressBar(){this.timeouts.forEach(t=>clearTimeout(t)),this.timeouts=[],this.parentContainer.querySelectorAll(`[data-qa^=tab-progress-bar-${this.hash}]`).forEach(t=>{t.classList.remove("animate-progress-bar"),t.classList.remove("grayProgressBar"),t.classList.remove("progressBarGradient")})}destroy(){this.isDestroyed=!0,this.timeouts.forEach(t=>clearTimeout(t)),this.timeouts=[],this.tabTitles.forEach(t=>{const e=Number(t.getAttribute("data-qa").split("-")[3]);t.removeEventListener("click",s=>this.onClick(s,e))})}}document.addEventListener("DOMContentLoaded",()=>{[...document.querySelectorAll("[data-qa=TemplateLayoutTabs]")].map(t=>{const e=t.querySelector("[data-qa^=TemplateLayoutTabsContainer-]"),s=e.getAttribute("data-qa")?.split("-")[1];return t.querySelector("[data-qa=BlockCardContainer]")&&t.querySelector("[data-qa=contentContainer]")?.classList.remove("contentBorder"),new l(e,s)})});
